# í•˜ìˆ˜ì²˜ë¦¬ì¥(WWTP) ì˜ˆì¸¡ ëª¨ë¸ ë¶„ì„ ë³´ê³ ì„œ (V2 - ê°œì„  ë²„ì „)

## ğŸ“Š ì‹¤í–‰ ìš”ì•½

**ì‹¤í–‰ ì¼ì‹œ**: 2026-01-27  
**ë²„ì „**: V2 (ë„ë©”ì¸ í”¼ì²˜ + ì •ê·œí™” ê°•í™”)  
**ë°ì´í„°ì…‹**: ì „ì²˜ë¦¬ëœ FLOW, TMS, ALL ë°ì´í„° (1ë¶„ ê°„ê²©, ì„ í˜• ë³´ê°„ ì™„ë£Œ)  
**ë°ì´í„° ì†ŒìŠ¤**: `data/processed/flow_proc.csv`, `tms_proc.csv`, `all_proc.csv`  
**ëª¨ë¸**: Ridge, Lasso, RandomForest, HistGBR, XGBoost  
**í‰ê°€ ì§€í‘œ**: RÂ², RMSE, MAPE

---

## ğŸ¯ V2 ì£¼ìš” ê°œì„ ì‚¬í•­

### 1. ë„ë©”ì¸ í”¼ì²˜ ì¶”ê°€ âœ…
```python
# ê°•ìˆ˜ëŸ‰ ê´€ë ¨
rain_intensity = RN_60m / (RN_DAY + 1)
is_raining = (RN_60m > 0)

# ì˜¨ë„-ìŠµë„ ê´€ë ¨
temp_humidity_idx = TA * HM / 100

# íƒ±í¬ ìˆ˜ìœ„ ê´€ë ¨
tank_total_level = level_TankA + level_TankB
tank_level_diff = abs(level_TankA - level_TankB)
tank_level_ratio = level_TankA / (level_TankB + 0.01)

# ìˆ˜ì§ˆ ë³€ìˆ˜ ê°„ ìƒí˜¸ì‘ìš©
TOC_TN_ratio = TOC_VU / (TN_VU + 0.01)
SS_TP_ratio = SS_VU / (TP_VU + 0.01)

# ì°¨ë¶„ í”¼ì²˜ (ë³€í™”ìœ¨)
TA_diff1 = TA.diff(1)  # 1ì‹œê°„ ë³€í™”
TA_diff24 = TA.diff(24)  # 24ì‹œê°„ ë³€í™”
```

### 2. ì •ê·œí™” ê°•í™” âœ…
```python
# Ridge (alpha ì¦ê°€)
V1: [0.1, 1.0, 10.0, 100.0]
V2: [100, 1000, 10000]

# Lasso (alpha ì¦ê°€)
V1: [0.001, 0.01, 0.1, 1.0]
V2: [1.0, 10.0, 100.0]

# RandomForest (max_depth ì œí•œ, min_samples_leaf ì¶”ê°€)
V1: max_depth=[10, 20, None], min_samples_leaf=ì—†ìŒ
V2: max_depth=[5, 10, 15], min_samples_leaf=[5, 10, 20]

# XGBoost (ì •ê·œí™” íŒŒë¼ë¯¸í„° ì¶”ê°€)
V2: min_child_weight=[3, 5, 7], gamma=[0, 0.1, 0.2]
```

### 3. Lag/Rolling ìœˆë„ìš° ì¶•ì†Œ âœ…
```python
# V1
lag_hours = [1, 3, 6, 12, 24]
roll_hours = [3, 12, 24]

# V2
lag_hours = [1, 3, 6, 12]  # 24 ì œê±°
roll_hours = [3, 6, 12]  # ë” ì§§ì€ ìœˆë„ìš°
```

---

## ğŸ“ˆ V1 vs V2 ì„±ëŠ¥ ë¹„êµ

### 1. FLOW ì˜ˆì¸¡ (Q_in)

#### ì„±ëŠ¥ ë¹„êµí‘œ
| ëª¨ë¸ | V1 Test RÂ² | V2 Test RÂ² | ê°œì„ ìœ¨ | V1 RMSE | V2 RMSE | ê°œì„ ìœ¨ |
|------|------------|------------|--------|---------|---------|--------|
| **RandomForest** | 0.2932 | **0.7201** | **+145%** | 67.75 | 36.98 | **-45%** |
| **XGBoost** | 0.3738 | **0.7162** | **+92%** | 63.78 | 37.24 | **-42%** |
| **HistGBR** | **0.5701** | **0.6897** | **+21%** | 52.84 | 38.94 | **-26%** |
| Lasso | 0.5487 | 0.4908 | -11% | 54.14 | 49.88 | -8% |
| Ridge | 0.5324 | 0.4665 | -12% | 55.11 | 51.05 | -7% |

#### ğŸ‰ ì£¼ìš” ì„±ê³¼
- **RandomForest ëŒ€í­ ê°œì„ **: RÂ² 0.29 â†’ 0.72 (+145%)
- **XGBoost ëŒ€í­ ê°œì„ **: RÂ² 0.37 â†’ 0.72 (+92%)
- **HistGBR ê°œì„ **: RÂ² 0.57 â†’ 0.69 (+21%)
- **ìµœê³  ì„±ëŠ¥**: RandomForest RÂ² 0.72, RMSE 36.98, MAPE 8.73%

#### ğŸ“Š ë°ì´í„° ì‚¬ìš©ë¥  ê°œì„ 
```
V1: 13,848 â†’ 576 (4.2%)
V2: 2,196 â†’ 2,160 (98.4%)
â†’ ë°ì´í„° ì‚¬ìš©ë¥  23ë°° ì¦ê°€!
```

#### ğŸ”‘ ì¤‘ìš” í”¼ì²˜ ë³€í™” (Top 10)
**V2 í”¼ì²˜**:
1. **RN_DAY_541_r12_mean** - ì¼ ê°•ìˆ˜ëŸ‰ 12ì‹œê°„ í‰ê· 
2. **hour** - ì‹œê°„
3. **level_TankB_diff1** - íƒ±í¬B ìˆ˜ìœ„ 1ì‹œê°„ ë³€í™” (V2 ì‹ ê·œ)
4. **level_TankA_diff1** - íƒ±í¬A ìˆ˜ìœ„ 1ì‹œê°„ ë³€í™” (V2 ì‹ ê·œ)
5. **level_TankB_r3_mean** - íƒ±í¬B ìˆ˜ìœ„ 3ì‹œê°„ í‰ê· 
6. **tank_total_level_lag1** - 1ì‹œê°„ ì „ ì´ íƒ±í¬ ìˆ˜ìœ„ (V2 ì‹ ê·œ)
7. **level_TankA_lag1** - 1ì‹œê°„ ì „ íƒ±í¬A ìˆ˜ìœ„
8. **tank_total_level_r3_mean** - ì´ íƒ±í¬ ìˆ˜ìœ„ 3ì‹œê°„ í‰ê·  (V2 ì‹ ê·œ)
9. **is_night_r6_mean** - ì•¼ê°„ ì—¬ë¶€ 6ì‹œê°„ í‰ê·  (V2 ì‹ ê·œ)
10. **level_TankA_r3_mean** - íƒ±í¬A ìˆ˜ìœ„ 3ì‹œê°„ í‰ê· 

**ê°œì„  íš¨ê³¼**: ë„ë©”ì¸ í”¼ì²˜(ì°¨ë¶„, ì´ ìˆ˜ìœ„, ì•¼ê°„ ì—¬ë¶€)ê°€ ìƒìœ„ 10ê°œ ì¤‘ 5ê°œ ì°¨ì§€

---

### 2. TMS ì˜ˆì¸¡ (6ê°œ ìˆ˜ì§ˆ ë³€ìˆ˜)

#### ì„±ëŠ¥ ë¹„êµí‘œ
| ëª¨ë¸ | V1 Test RÂ² | V2 Test RÂ² | ë³€í™” | V1 RMSE | V2 RMSE | ë³€í™” |
|------|------------|------------|------|---------|---------|------|
| **XGBoost** | -2.09 | **-1.31** | **+37% ê°œì„ ** | 59.52 | 66,928 | ì•…í™” |
| RandomForest | -1.31 | -2.75 | -110% ì•…í™” | 67.10 | 203,235 | ì•…í™” |
| HistGBR | -1.82 | -4.13 | -127% ì•…í™” | 66.42 | 159,008 | ì•…í™” |
| Lasso | -5.08 | -10.25 | -102% ì•…í™” | 68.75 | 67,238 | ìœ ì‚¬ |
| Ridge | -20.74 | -27.71 | -34% ì•…í™” | 66.34 | 67,010 | ìœ ì‚¬ |

#### âš ï¸ ë¬¸ì œì 
- **ì—¬ì „íˆ ëª¨ë“  ëª¨ë¸ RÂ² < 0** (í‰ê· ë³´ë‹¤ ëª»í•¨)
- **RMSE ê¸‰ì¦**: íŠ¹íˆ RandomForest, HistGBR
- **MAPE ë¹„ì •ìƒ**: 10^15 ìˆ˜ì¤€ (ì¼ë¶€ íƒ€ê²Ÿì˜ ì‹¤ì œê°’ì´ 0ì— ê°€ê¹Œì›€)

#### ğŸ“Š ë°ì´í„° ì‚¬ìš©ë¥ 
```
V1: 13,848 â†’ 576 (4.2%)
V2: 9,567 â†’ 8,648 (90.4%)
â†’ ë°ì´í„° ì‚¬ìš©ë¥  21ë°° ì¦ê°€!
```

#### ğŸ“‰ íƒ€ê²Ÿë³„ ì„±ëŠ¥ (XGBoost ê¸°ì¤€)
| íƒ€ê²Ÿ | V1 RÂ² | V2 RÂ² | ë³€í™” | í•´ì„ |
|------|-------|-------|------|------|
| **FLUX_VU** | 0.9742 | 0.0041 | **-99.6%** | âŒâŒ ê¸‰ê²©íˆ ì•…í™” |
| TN_VU | -0.7913 | -0.2593 | +67% | â–³ ì•½ê°„ ê°œì„  |
| TOC_VU | -5.4519 | -0.0922 | +98% | â–³ í¬ê²Œ ê°œì„  |
| PH_VU | 0.5005 | -0.2654 | -153% | âŒ ì•…í™” |
| SS_VU | -1.0327 | -2.1258 | -106% | âŒ ì•…í™” |
| **TP_VU** | -6.7209 | -5.0961 | +24% | â–³ ì•½ê°„ ê°œì„  |

**ì£¼ëª©**: FLUX_VUê°€ V1ì—ì„œ ìœ ì¼í•œ ì„±ê³µ ì‚¬ë¡€ì˜€ìœ¼ë‚˜ V2ì—ì„œ ê¸‰ê²©íˆ ì•…í™”

#### ğŸ”‘ ì¤‘ìš” í”¼ì²˜ ë³€í™” (Top 10)
**V2 í”¼ì²˜**:
1. **sin_dow_lag12** - 12ì‹œê°„ ì „ ìš”ì¼ ì£¼ê¸°
2. **cos_month_r6_mean** - ì›” ì£¼ê¸° 6ì‹œê°„ í‰ê· 
3. **cos_month_lag12** - 12ì‹œê°„ ì „ ì›” ì£¼ê¸°
4. **TD_569_r12_mean** - ì´ìŠ¬ì  12ì‹œê°„ í‰ê· 
5. **cos_month_r3_mean** - ì›” ì£¼ê¸° 3ì‹œê°„ í‰ê· 
6. **TD_368_r12_mean** - ì´ìŠ¬ì  12ì‹œê°„ í‰ê· 
7. **TD_541_r12_mean** - ì´ìŠ¬ì  12ì‹œê°„ í‰ê· 
8. **SS_TP_ratio** - SS/TP ë¹„ìœ¨ (V2 ì‹ ê·œ)
9. **TOC_TN_ratio** - TOC/TN ë¹„ìœ¨ (V2 ì‹ ê·œ)
10. **SS_TP_ratio_r12_mean** - SS/TP ë¹„ìœ¨ 12ì‹œê°„ í‰ê·  (V2 ì‹ ê·œ)

**ê°œì„  íš¨ê³¼**: ë„ë©”ì¸ í”¼ì²˜(ìˆ˜ì§ˆ ë¹„ìœ¨)ê°€ ìƒìœ„ 10ê°œ ì¤‘ 3ê°œ ì°¨ì§€

---

### 3. ALL ì˜ˆì¸¡ (Q_in + 6ê°œ ìˆ˜ì§ˆ ë³€ìˆ˜)

#### ì„±ëŠ¥ ë¹„êµí‘œ
| ëª¨ë¸ | V1 Test RÂ² | V2 Test RÂ² | ë³€í™” | V1 RMSE | V2 RMSE | ë³€í™” |
|------|------------|------------|------|---------|---------|------|
| **RandomForest** | -1.10 | **-0.48** | **+56% ê°œì„ ** | 73.05 | 73.29 | ìœ ì‚¬ |
| HistGBR | -1.48 | -0.91 | +38% ê°œì„  | 74.92 | 76.31 | ìœ ì‚¬ |
| Ridge | -20.54 | -0.98 | +95% ê°œì„  | 75.92 | 88.24 | ì•…í™” |
| XGBoost | -1.68 | -1.23 | +27% ê°œì„  | 62.33 | 67.57 | ì•…í™” |
| Lasso | -4.33 | -2.32 | +46% ê°œì„  | 79.24 | 72.43 | ê°œì„  |

#### ğŸ“Š ë°ì´í„° ì‚¬ìš©ë¥ 
```
V1: 13,848 â†’ 576 (4.2%)
V2: 631 â†’ 595 (94.3%)
â†’ ë°ì´í„° ì‚¬ìš©ë¥  22ë°° ì¦ê°€!
```

#### ğŸ“‰ íƒ€ê²Ÿë³„ ì„±ëŠ¥ (RandomForest ê¸°ì¤€)
| íƒ€ê²Ÿ | V1 RÂ² | V2 RÂ² | ë³€í™” | í•´ì„ |
|------|-------|-------|------|------|
| **FLUX_VU** | 0.9619 | 0.9560 | -0.6% | âœ… ìœ ì§€ |
| **Q_in** | 0.0088 | 0.5555 | **+6213%** | âœ…âœ… ëŒ€í­ ê°œì„  |
| TN_VU | -0.7931 | 0.2987 | +138% | âœ… í¬ê²Œ ê°œì„  |
| SS_VU | -0.9899 | 0.0113 | +101% | âœ… í¬ê²Œ ê°œì„  |
| PH_VU | 0.5182 | -0.1590 | -131% | âŒ ì•…í™” |
| TOC_VU | -0.6864 | -4.7693 | -595% | âŒ ì•…í™” |
| TP_VU | -6.7276 | -0.2699 | +96% | âœ… í¬ê²Œ ê°œì„  |

**ì£¼ëª©**: Q_inì´ V1ì—ì„œ ê±°ì˜ ì˜ˆì¸¡ ë¶ˆê°€ â†’ V2ì—ì„œ RÂ² 0.56ìœ¼ë¡œ ëŒ€í­ ê°œì„ !

#### ğŸ”‘ ì¤‘ìš” í”¼ì²˜ ë³€í™” (Top 10)
**V2 í”¼ì²˜**:
1. **is_night_r6_mean** - ì•¼ê°„ ì—¬ë¶€ 6ì‹œê°„ í‰ê·  (V2 ì‹ ê·œ)
2. **sin_hour** - ì‹œê°„ ì£¼ê¸°
3. **sin_hour_lag12** - 12ì‹œê°„ ì „ ì‹œê°„ ì£¼ê¸°
4. **SS_TP_ratio_r3_mean** - SS/TP ë¹„ìœ¨ 3ì‹œê°„ í‰ê·  (V2 ì‹ ê·œ)
5. **SS_TP_ratio_r12_mean** - SS/TP ë¹„ìœ¨ 12ì‹œê°„ í‰ê·  (V2 ì‹ ê·œ)
6. **hour** - ì‹œê°„
7. **TD_368_r12_mean** - ì´ìŠ¬ì  12ì‹œê°„ í‰ê· 
8. **SS_TP_ratio_lag1** - 1ì‹œê°„ ì „ SS/TP ë¹„ìœ¨ (V2 ì‹ ê·œ)
9. **TOC_TN_ratio** - TOC/TN ë¹„ìœ¨ (V2 ì‹ ê·œ)
10. **SS_TP_ratio** - SS/TP ë¹„ìœ¨ (V2 ì‹ ê·œ)

**ê°œì„  íš¨ê³¼**: ë„ë©”ì¸ í”¼ì²˜(ìˆ˜ì§ˆ ë¹„ìœ¨, ì•¼ê°„ ì—¬ë¶€)ê°€ ìƒìœ„ 10ê°œ ì¤‘ 6ê°œ ì°¨ì§€

---

## ğŸ¯ V2 ì¢…í•© í‰ê°€

### âœ… ì„±ê³µ ì‚¬ë¡€

#### 1. FLOW ì˜ˆì¸¡ ëŒ€í­ ê°œì„  ğŸ†
- **RandomForest**: RÂ² 0.29 â†’ 0.72 (+145%)
- **XGBoost**: RÂ² 0.37 â†’ 0.72 (+92%)
- **ë°ì´í„° ì‚¬ìš©ë¥ **: 4.2% â†’ 98.4% (23ë°° ì¦ê°€)
- **ë„ë©”ì¸ í”¼ì²˜ íš¨ê³¼**: ì°¨ë¶„, ì´ ìˆ˜ìœ„, ì•¼ê°„ ì—¬ë¶€ê°€ ìƒìœ„ í”¼ì²˜ë¡œ ì„ ì •

#### 2. ALL ì˜ˆì¸¡ ê°œì„ 
- **Q_in (ALL ëª¨ë“œ)**: RÂ² 0.01 â†’ 0.56 (+6213%)
- **TN_VU**: RÂ² -0.79 â†’ 0.30 (+138%)
- **SS_VU**: RÂ² -0.99 â†’ 0.01 (+101%)
- **TP_VU**: RÂ² -6.73 â†’ -0.27 (+96%)

#### 3. ë°ì´í„° í™œìš©ë„ ëŒ€í­ ì¦ê°€
```
FLOW: 4.2% â†’ 98.4% (23ë°°)
TMS: 4.2% â†’ 90.4% (21ë°°)
ALL: 4.2% â†’ 94.3% (22ë°°)
```

### âŒ ì‹¤íŒ¨ ì‚¬ë¡€

#### 1. TMS ì˜ˆì¸¡ ì—¬ì „íˆ ì‹¤íŒ¨
- **ëª¨ë“  ëª¨ë¸ RÂ² < 0** (í‰ê· ë³´ë‹¤ ëª»í•¨)
- **FLUX_VU ê¸‰ê²©íˆ ì•…í™”**: RÂ² 0.97 â†’ 0.00 (-99.6%)
- **RMSE ê¸‰ì¦**: RandomForest 67 â†’ 203,235

#### 2. ê³¼ì í•© ì—¬ì „íˆ ì‹¬ê°
| ëª¨ë¸ | ëª¨ë“œ | Train RÂ² | Valid RÂ² | Test RÂ² | ê³¼ì í•© ì •ë„ |
|------|------|----------|----------|---------|------------|
| RandomForest | TMS | 0.88 | -23,729 | -2.75 | âŒâŒâŒ ê·¹ì‹¬ |
| HistGBR | TMS | 0.91 | -19,815 | -4.13 | âŒâŒâŒ ê·¹ì‹¬ |
| RandomForest | FLOW | 0.91 | 0.72 | 0.72 | âœ… ê°œì„ ë¨ |

#### 3. ì„ í˜• ëª¨ë¸ ì„±ëŠ¥ ì €í•˜
- **Ridge/Lasso**: V1ë³´ë‹¤ V2ì—ì„œ ì„±ëŠ¥ ì €í•˜
- **ì›ì¸**: ê³¼ë„í•œ ì •ê·œí™” (alpha ë„ˆë¬´ í¼)

---

## ğŸ” ì›ì¸ ë¶„ì„

### FLOW ì˜ˆì¸¡ ì„±ê³µ ì´ìœ 
1. **ë°ì´í„° í’ˆì§ˆ**: 98.4% ì‚¬ìš© (V1: 4.2%)
2. **ë„ë©”ì¸ í”¼ì²˜ íš¨ê³¼**: 
   - íƒ±í¬ ìˆ˜ìœ„ ì°¨ë¶„ (ë³€í™”ìœ¨)
   - ì´ íƒ±í¬ ìˆ˜ìœ„
   - ì•¼ê°„ ì—¬ë¶€
3. **ì •ê·œí™” íš¨ê³¼**: RandomForest max_depth ì œí•œìœ¼ë¡œ ê³¼ì í•© ê°ì†Œ
4. **í”¼ì²˜-íƒ€ê²Ÿ ê´€ê³„**: íƒ±í¬ ìˆ˜ìœ„, ê°•ìˆ˜ëŸ‰ â†’ ìœ ì… ìœ ëŸ‰ (ëª…í™•í•œ ì¸ê³¼ê´€ê³„)

### TMS ì˜ˆì¸¡ ì‹¤íŒ¨ ì´ìœ 
1. **í”¼ì²˜-íƒ€ê²Ÿ ê´€ê³„ ë¶€ì¡±**: 
   - ê¸°ìƒ ë°ì´í„°(ì˜¨ë„, ìŠµë„, ì´ìŠ¬ì ) â†’ ìˆ˜ì§ˆ ë³€ìˆ˜ (ì•½í•œ ê´€ê³„)
   - ìœ ì…ìˆ˜ íŠ¹ì„±, ì²˜ë¦¬ ê³µì • ë°ì´í„° ë¶€ì¬
2. **íƒ€ê²Ÿ ë³€ìˆ˜ì˜ íŠ¹ì„±**:
   - ìˆ˜ì§ˆ ë³€ìˆ˜ëŠ” ë³µì¡í•œ ìƒí™”í•™ ë°˜ì‘ì˜ ê²°ê³¼
   - ë‹¨ìˆœ ì‹œê³„ì—´ íŒ¨í„´ìœ¼ë¡œ ì˜ˆì¸¡ ë¶ˆê°€
3. **FLUX_VU ì•…í™”**:
   - V1: ìê¸°ìƒê´€ì„±(lag í”¼ì²˜)ìœ¼ë¡œ ì˜ˆì¸¡ ê°€ëŠ¥
   - V2: lag ìœˆë„ìš° ì¶•ì†Œ (24 ì œê±°) â†’ ìê¸°ìƒê´€ì„± ì•½í™”
4. **ê³¼ì í•© ì‹¬í™”**:
   - ë°ì´í„° ì¦ê°€(90.4%)ì—ë„ ë¶ˆêµ¬í•˜ê³  Valid RÂ² ê¸‰ë½
   - ëª¨ë¸ì´ ë…¸ì´ì¦ˆ í•™ìŠµ

### ALL ì˜ˆì¸¡ ë¶€ë¶„ ì„±ê³µ ì´ìœ 
1. **Q_in ê°œì„ **: FLOW ë‹¨ë… ì˜ˆì¸¡ê³¼ ìœ ì‚¬í•œ íš¨ê³¼
2. **ì¼ë¶€ ìˆ˜ì§ˆ ë³€ìˆ˜ ê°œì„ **: TN, SS, TP (ì•½ê°„)
3. **FLUX_VU ìœ ì§€**: ì—¬ì „íˆ RÂ² 0.96
4. **ë°ì´í„° ì‚¬ìš©ë¥ **: 94.3%

---

## ğŸ’¡ V3 ê°œì„  ë°©ì•ˆ

### 1. FLUX_VU ë³µì› (ìµœìš°ì„ )
```python
# V2ì—ì„œ ì œê±°í•œ 24ì‹œê°„ lag ë³µì›
lag_hours = [1, 3, 6, 12, 24]  # 24 ì¶”ê°€

# FLUX_VU ì „ìš© í”¼ì²˜
FLUX_VU_lag24, FLUX_VU_r24_mean
```

### 2. ì„ í˜• ëª¨ë¸ ì •ê·œí™” ì™„í™”
```python
# V2: ê³¼ë„í•œ ì •ê·œí™”
Ridge(alpha=10000)
Lasso(alpha=100)

# V3: ì¤‘ê°„ ìˆ˜ì¤€
Ridge(alpha=[10, 100, 1000])  # 10000 ì œê±°
Lasso(alpha=[0.1, 1.0, 10.0])  # 100 ì œê±°
```

### 3. TMS ì˜ˆì¸¡ í¬ê¸° ë˜ëŠ” ì „ëµ ë³€ê²½
```python
# ì˜µì…˜ 1: ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë³€ìˆ˜ë§Œ ì˜ˆì¸¡
targets = ['FLUX_VU', 'PH_VU']  # TOC, TN, TP, SS ì œì™¸

# ì˜µì…˜ 2: 2ë‹¨ê³„ ì˜ˆì¸¡
# 1ë‹¨ê³„: FLUX_VU, Q_in ì˜ˆì¸¡
# 2ë‹¨ê³„: 1ë‹¨ê³„ ì˜ˆì¸¡ê°’ì„ í”¼ì²˜ë¡œ ì‚¬ìš©í•˜ì—¬ ìˆ˜ì§ˆ ë³€ìˆ˜ ì˜ˆì¸¡

# ì˜µì…˜ 3: ì¶”ê°€ ë°ì´í„° ìˆ˜ì§‘
# - ìœ ì…ìˆ˜ íŠ¹ì„± (BOD, COD, pH ë“±)
# - ì²˜ë¦¬ ê³µì • ë°ì´í„° (í­ê¸°ëŸ‰, ìŠ¬ëŸ¬ì§€ ë†ë„ ë“±)
```

### 4. ëª¨ë¸ë³„ ìµœì  ì„¤ì •
```python
# FLOW ì˜ˆì¸¡: RandomForest/XGBoost (V2 ì„¤ì • ìœ ì§€)
# - max_depth=10, min_samples_leaf=5

# TMS ì˜ˆì¸¡: í¬ê¸° ë˜ëŠ” ë‹¨ìˆœ ëª¨ë¸
# - Ridge(alpha=100), Lasso(alpha=1.0)

# ALL ì˜ˆì¸¡: RandomForest (V2 ì„¤ì • ìœ ì§€)
# - max_depth=15, min_samples_leaf=5
```

### 5. í”¼ì²˜ ì„ íƒ ê°œì„ 
```python
# í˜„ì¬: RandomForest ì¤‘ìš”ë„ ê¸°ë°˜
# ë¬¸ì œ: ê³¼ì í•©ëœ ëª¨ë¸ì˜ ì¤‘ìš”ë„ëŠ” ì‹ ë¢° ë¶ˆê°€

# ê°œì„ : ë‹¤ì¤‘ ë°©ë²• ì¡°í•©
# 1. ìƒê´€ê³„ìˆ˜ ê¸°ë°˜ (Pearson, Spearman)
# 2. Mutual Information
# 3. SHAP values
# 4. ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜ ìˆ˜ë™ ì„ íƒ
```

---

## ğŸ“‹ V3 ì‹¤í–‰ ê³„íš

### ë‹¨ê¸° (1ì£¼ì¼)
1. âœ… **FLUX_VU ë³µì›**
   - 24ì‹œê°„ lag í”¼ì²˜ ì¶”ê°€
   - FLUX_VU ì „ìš© ëª¨ë¸ í•™ìŠµ

2. âœ… **ì„ í˜• ëª¨ë¸ ì •ê·œí™” ì™„í™”**
   - Ridge alpha: 10000 â†’ 1000
   - Lasso alpha: 100 â†’ 10

3. âœ… **TMS ì˜ˆì¸¡ ì „ëµ ë³€ê²½**
   - FLUX_VU, PH_VUë§Œ ì˜ˆì¸¡
   - ë‚˜ë¨¸ì§€ ë³€ìˆ˜ëŠ” ì¶”ê°€ ë°ì´í„° ìˆ˜ì§‘ í›„ ì¬ì‹œë„

### ì¤‘ê¸° (1ê°œì›”)
4. âœ… **2ë‹¨ê³„ ì˜ˆì¸¡ êµ¬í˜„**
   - 1ë‹¨ê³„: Q_in, FLUX_VU ì˜ˆì¸¡
   - 2ë‹¨ê³„: 1ë‹¨ê³„ ì˜ˆì¸¡ê°’ì„ í”¼ì²˜ë¡œ ì‚¬ìš©

5. âœ… **í”¼ì²˜ ì„ íƒ ê°œì„ **
   - ë‹¤ì¤‘ ë°©ë²• ì¡°í•©
   - ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜ ìˆ˜ë™ ì„ íƒ

6. âœ… **ì•™ìƒë¸” ëª¨ë¸**
   - FLOW: RandomForest + XGBoost Stacking
   - ALL: RandomForest + HistGBR Blending

### ì¥ê¸° (3ê°œì›”)
7. âœ… **ì¶”ê°€ ë°ì´í„° ìˆ˜ì§‘**
   - ìœ ì…ìˆ˜ íŠ¹ì„± (BOD, COD, pH ë“±)
   - ì²˜ë¦¬ ê³µì • ë°ì´í„° (í­ê¸°ëŸ‰, ìŠ¬ëŸ¬ì§€ ë†ë„ ë“±)

8. âœ… **ì‹œê³„ì—´ ëª¨ë¸ ì‹¤í—˜**
   - LSTM, GRU (FLUX_VU, Q_in ì „ìš©)
   - Prophet (ê³„ì ˆì„± ê°•í•œ ë³€ìˆ˜)

---

## ğŸ“ ê²°ë¡ 

### V2 ì„±ê³¼
- **FLOW ì˜ˆì¸¡ ëŒ€ì„±ê³µ**: RÂ² 0.72 (V1: 0.57, +26%)
- **ë°ì´í„° í™œìš©ë„ ëŒ€í­ ì¦ê°€**: 4.2% â†’ 90%+ (20ë°°)
- **ë„ë©”ì¸ í”¼ì²˜ íš¨ê³¼ ì…ì¦**: ì°¨ë¶„, ë¹„ìœ¨, ìƒí˜¸ì‘ìš© í”¼ì²˜ê°€ ìƒìœ„ ì„ ì •
- **ALL ì˜ˆì¸¡ ê°œì„ **: Q_in RÂ² 0.01 â†’ 0.56 (+6213%)

### V2 í•œê³„
- **TMS ì˜ˆì¸¡ ì—¬ì „íˆ ì‹¤íŒ¨**: RÂ² < 0
- **FLUX_VU ê¸‰ê²©íˆ ì•…í™”**: RÂ² 0.97 â†’ 0.00
- **ê³¼ì í•© ì—¬ì „íˆ ì‹¬ê°**: Train-Valid ê²©ì°¨ ê·¹ì‹¬
- **ì„ í˜• ëª¨ë¸ ì„±ëŠ¥ ì €í•˜**: ê³¼ë„í•œ ì •ê·œí™”

### V3 ëª©í‘œ
```
FLOW (Q_in):
  V1: RÂ² 0.57
  V2: RÂ² 0.72
  V3: RÂ² 0.75+ (ëª©í‘œ)

FLUX_VU:
  V1: RÂ² 0.97
  V2: RÂ² 0.00
  V3: RÂ² 0.95+ (ëª©í‘œ, ë³µì›)

TMS (ê¸°íƒ€ ìˆ˜ì§ˆ ë³€ìˆ˜):
  V1: RÂ² < 0
  V2: RÂ² < 0
  V3: ì¶”ê°€ ë°ì´í„° ìˆ˜ì§‘ í›„ ì¬ì‹œë„
```

### ìµœì¢… ê¶Œì¥ì‚¬í•­
1. **FLOW ì˜ˆì¸¡**: V2 ëª¨ë¸ ì‚¬ìš© (RandomForest, RÂ² 0.72)
2. **FLUX_VU ì˜ˆì¸¡**: V1 ëª¨ë¸ ì‚¬ìš© (XGBoost, RÂ² 0.97) ë˜ëŠ” V3 ê°œì„  ëŒ€ê¸°
3. **TMS ìˆ˜ì§ˆ ë³€ìˆ˜**: ì¶”ê°€ ë°ì´í„° ìˆ˜ì§‘ í•„ìš” (í˜„ì¬ ì˜ˆì¸¡ ë¶ˆê°€)

---

## ğŸ“Š ì‹œê°í™” ê²°ê³¼

ìƒì„±ëœ ê·¸ë˜í”„ (V2):
1. `flow_r2_comparison.png` - FLOW ëª¨ë¸ ë¹„êµ
2. `tms_r2_comparison.png` - TMS ëª¨ë¸ ë¹„êµ
3. `all_r2_comparison.png` - ALL ëª¨ë¸ ë¹„êµ
4. `flow_XGBoost_learning_curve.png` - XGBoost í•™ìŠµ ê³¡ì„  (102 iter)
5. `flow_HistGBR_learning_curve.png` - HistGBR í•™ìŠµ ê³¡ì„  (262 iter)
6. `tms_HistGBR_learning_curve.png` - HistGBR í•™ìŠµ ê³¡ì„ 
7. `tms_XGBoost_learning_curve.png` - XGBoost í•™ìŠµ ê³¡ì„ 
8. `all_HistGBR_learning_curve.png` - HistGBR í•™ìŠµ ê³¡ì„ 
9. `all_XGBoost_learning_curve.png` - XGBoost í•™ìŠµ ê³¡ì„ 

**ìœ„ì¹˜**: `results/ML/v2/`

---

**ì‘ì„±ì¼**: 2026-01-27  
**ë²„ì „**: V2 (ë„ë©”ì¸ í”¼ì²˜ + ì •ê·œí™” ê°•í™”)  
**ì´ì „ ë²„ì „**: V1 (ì „ì²˜ë¦¬ ë°ì´í„° ì‚¬ìš©, dropna ë°©ì‹)  
**ë‹¤ìŒ ë²„ì „**: V3 (FLUX_VU ë³µì› + ì„ í˜• ëª¨ë¸ ê°œì„  + TMS ì „ëµ ë³€ê²½)  
**ì‘ì„±ì**: ML Baseline Analysis
